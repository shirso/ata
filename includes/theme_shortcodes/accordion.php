<?php add_shortcode('collapsibles','bs_collapsibles' );    add_shortcode('collapse','bs_collapse' );  function bs_collapsibles( $atts, $content = null ) {        if( isset($GLOBALS['collapsibles_count']) )      $GLOBALS['collapsibles_count']++;    else      $GLOBALS['collapsibles_count'] = 0;    $defaults = array();    extract( shortcode_atts( $defaults, $atts ) );        // Extract the tab titles for use in the tab widget.    preg_match_all( '/collapse title="([^\"]+)"/i', $content, $matches, PREG_OFFSET_CAPTURE );        $tab_titles = array();    if( isset($matches[1]) ){ $tab_titles = $matches[1]; }        $output = '';        if( count($tab_titles) ){      $output .= '<div class="accordion" id="accordion-' . $GLOBALS['collapsibles_count'] . '">';      $output .= do_shortcode( $content );      $output .= '</div>';    } else {      $output .= do_shortcode( $content );    }        return $output;  }   function bs_collapse( $atts, $content = null ) {    if( !isset($GLOBALS['current_collapse']) )      $GLOBALS['current_collapse'] = 0;    else       $GLOBALS['current_collapse']++;    $defaults = array( 'title' => 'Tab', 'state' => '');    extract( shortcode_atts( $defaults, $atts ) );        if (!empty($state))       $state = 'in';    return '    <div class="accordion-group">      <div class="accordion-heading">        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion-' . $GLOBALS['collapsibles_count'] . '" href="#collapse_' . $GLOBALS['current_collapse'] . '_'. sanitize_title( $title ) .'">          ' . $title . '         </a>      </div>      <div id="collapse_' . $GLOBALS['current_collapse'] . '_'. sanitize_title( $title ) .'" class="accordion-body collapse ' . $state . '">        <div class="accordion-inner">          ' . $content . '         </div>      </div>    </div>    ';  }